# 要件定義書

## 改訂履歴

| バージョン | 改訂日     | 担当者 | 概要                   |
| :--- | :--- | :--- | :--- |
| 1.0.0    | 2025-07-01 | Gemini | 初版作成               |
| 1.0.1    | 2025-07-09 | Gemini | 修正なし（影響範囲外） |
| 1.0.2    | 2025-07-10 | Gemini | Issue#4に伴う更新 |
| 1.0.3    | 2025-07-11 | Gemini | Issue#6に伴う作成日機能の追加 |
| 1.0.4    | 2025-07-11 | Gemini | Issue#10に伴うフィルタボタンのレイアウト改善とタスク件数表示の調整 |
| 1.0.5    | 2025-07-18 | Gemini | Issue#11に伴うフィルタリングUIのドロップダウン化 |
| 1.0.6    | 2025-07-18 | Gemini | Issue#19に伴う「完了タスクを一括削除」ボタンの表示制御 |

## 1. 概要

本ドキュメントは、「究極のTODOアプリ」の要件を定義する。
このアプリケーションは、ユーザーが日々のタスクを効率的に管理し、生産性を向上させることを目的とする。

## 2. 機能要件

### 2.1. タスク管理

- **タスクの追加:** ユーザーは新しいタスクを入力し、リストに追加できる。この際、タスクの作成日時が自動的に記録される。
- **タスクの編集:** 既存のタスクの内容を編集できる。
- **タスクの削除:** タスクをリストから削除できる。
- **タスクの完了/未完了切り替え:** タスクの状態を「完了」または「未完了」に切り替えることができる。
- **完了済みタスクの一括削除:** 完了したタスクをすべて一度に削除できる。

### 2.2. タスクの可視化とフィルタリング

- **タスク一覧表示:** 未完了のタスクがデフォルトでリスト形式で表示される。タスクの作成日も表示される。
- **タスクのフィルタリング:** 「すべて」「未完了」「完了済み」「繰り返し」の状態でタスクをフィルタリング表示できる。
- **タスクの検索:** キーワードでタスクを検索できる。
- **未完了タスク数の表示:** 未完了のタスク数が常に表示される。

### 2.3. 高度な機能

- **期日設定:** 各タスクに期日を設定できる。
- **期日の可視化:** 期日が表示され、期限切れのタスクは視覚的に強調される。
- **繰り返しタスクの設定:** 「毎日」「毎週」「毎月」といったルールでタスクが自動的に生成されるように設定できる。
- **タスクの並べ替え:** ドラッグ＆ドロップでタスクの順序を自由に変更できる。
- **データのエクスポート:** タスクリストをCSV形式でエクスポートできる。エクスポート対象は「すべて」「未完了」「完了済み」から選択できる。CSVファイルには、タスク名、状態、期日、タグ、優先度、作成日の情報が含まれる。

### 2.4. ユーザーインターフェース

- **テーマ切り替え:** ライトモードとダークモードのテーマを切り替えることができる。

### 2.5. タグ・優先度設定

- **タスクへのタグ付け:** 各タスクに複数のタグを付与できる。
- **タスクの優先度設定:** 各タスクに「高」「中」「低」などの優先度を設定できる。
- **タグによるフィルタリング:** 特定のタグを持つタスクのみを表示できる。
- **優先度による並べ替え:** タスクを優先度順に並べ替えて表示できる。

## 3. 非機能要件

### 3.1. データ永続化

- ユーザーが入力したタスク情報は、ブラウザを閉じても保持される。
- テーマの設定は、ブラウザを閉じても保持される。

### 3.2. パフォーマンス

- アプリケーションの読み込み、タスクの追加・更新・削除は、ユーザーがストレスを感じない速度で実行されること。

### 3.3. 互換性

- 主要なモダンブラウザ（Chrome, Firefox, Safari, Edge）で正常に動作すること。

### 3.4. ユーザビリティ

- 直感的で分かりやすいインターフェースを提供する。
- レスポンシブデザインに対応し、デスクトップとモバイルデバイスの両方で快適に利用できること。

### 3.5. アクセシビリティ

- **スクリーンリーダー対応:** すべてのインタラクティブな要素（ボタン、入力フィールド、リンクなど）は、スクリーンリーダーによってその目的が明確に伝わるように、適切なラベル（例: `aria-label`）を持つこと。
- **キーボード操作:** すべての機能は、マウスを使わずにキーボードのみで操作可能であること。


## 4. 繰り返しタスクの仕様詳細

- **テンプレートタスク:** 繰り返し設定がされたタスクは「テンプレート」として扱われる。このテンプレートタスク自体は完了できず、リストに常に表示される。
- **タスクの自動生成:**
    - アプリケーション起動時に、繰り返しルールに基づいて新しいタスクが自動で生成される。
    - 例えば、「毎週月曜日」に設定されたタスクがある場合、月曜日を迎えるたびに新しいタスクがリストに追加される。
    - **生成されるタスクの期日:** 自動生成されるタスクの期日は、**生成されたその日**とする。
- **生成ロジック:**
    - 最後にタスクが生成された日付を記録しておく。
    - アプリケーション起動時に、その日付から今日までの間に、繰り返し条件に合致する日があれば、その日付でタスクを生成する。
    - 例えば、毎日繰り返すタスクの最終生成日が昨日だった場合、今日の日付で新しいタスクを1つ生成する。最終生成日が3日前だった場合は、一昨日、昨日、今日の3つのタスクを生成する。

## 5. 完了済みタスクの仕様詳細

- **編集不可:** 完了済みのタスクは、内容の編集、期日の変更、繰り返し設定の変更ができないようにする。関連する操作ボタンは無効化される。

## 6. フィルタリングUIの仕様詳細

- **ドロップダウン化:** 従来のボタン形式ではなく、ドロップダウンメニューを使用してフィルタリングオプション（「すべて」「未完了」「完了済み」「繰り返し」）を選択できるようにする。

## 7. 「完了タスクを一括削除」ボタンの表示制御

- **表示条件:** 完了済みのタスクが1つ以上存在する場合にのみ、「完了タスクを一括削除」ボタンを表示する。完了済みのタスクが存在しない場合は、ボタンを非表示にする。